<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CI/CD Setup Guide - .NET 8 Web API with Jenkins, Kubernetes, Kong & SQL Server</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        header {
            border-bottom: 4px solid #0066cc;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        h1 {
            color: #0066cc;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        
        .meta-info {
            display: flex;
            gap: 30px;
            color: #666;
            font-size: 0.9em;
            flex-wrap: wrap;
        }
        
        .meta-info span {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        h2 {
            color: #0066cc;
            font-size: 1.8em;
            margin-top: 40px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        h3 {
            color: #333;
            font-size: 1.4em;
            margin-top: 25px;
            margin-bottom: 12px;
        }
        
        h4 {
            color: #555;
            font-size: 1.1em;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        p {
            margin-bottom: 15px;
        }
        
        ul, ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #c7254e;
        }
        
        pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }
        
        pre code {
            background: none;
            color: inherit;
            padding: 0;
        }
        
        .info-box {
            background-color: #e7f3ff;
            border-left: 4px solid #0066cc;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .warning-box {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .success-box {
            background-color: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .command-box {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .command-box strong {
            display: block;
            margin-bottom: 10px;
            color: #0066cc;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.95em;
        }
        
        th {
            background-color: #0066cc;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 12px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        tr:hover {
            background-color: #f5f5f5;
        }
        
        .checklist {
            list-style: none;
            margin-left: 0;
        }
        
        .checklist li:before {
            content: "✓ ";
            color: #28a745;
            font-weight: bold;
            margin-right: 8px;
        }
        
        .architecture-diagram {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
            text-align: center;
        }
        
        .toc {
            background-color: #f8f9fa;
            padding: 25px;
            border-radius: 5px;
            margin: 30px 0;
        }
        
        .toc h2 {
            margin-top: 0;
        }
        
        .toc ul {
            margin-left: 20px;
        }
        
        .toc a {
            color: #0066cc;
            text-decoration: none;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
        
        .file-path {
            background-color: #fff8e1;
            padding: 8px 12px;
            border-left: 3px solid #ffc107;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                padding: 20px;
            }
            
            pre {
                page-break-inside: avoid;
            }
            
            h2 {
                page-break-after: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Complete CI/CD Setup Guide</h1>
            <p class="subtitle">.NET 8 Web API with Jenkins, Docker Desktop Kubernetes, Kong API Gateway & SQL Server</p>
            <div class="meta-info">
                <span><strong>Author:</strong> CI/CD Implementation Guide</span>
                <span><strong>Date:</strong> October 12, 2025</span>
                <span><strong>Version:</strong> 3.0</span>
            </div>
        </header>

        <div class="toc">
            <h2>Table of Contents</h2>
            <ol>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#prerequisites">Prerequisites</a></li>
                <li><a href="#architecture">Architecture</a></li>
                <li><a href="#section1">Section 1: Enable Kubernetes in Docker Desktop</a></li>
                <li><a href="#section2">Section 2: Deploy SQL Server to Kubernetes</a></li>
                <li><a href="#section3">Section 3: Prepare Your .NET 8 Web API Project</a></li>
                <li><a href="#section4">Section 4: Add Database Integration to API</a></li>
                <li><a href="#section5">Section 5: Push Your Code to GitHub</a></li>
                <li><a href="#section6">Section 6: Configure Jenkins</a></li>
                <li><a href="#section7">Section 7: Create Jenkins Pipeline Job</a></li>
                <li><a href="#section8">Section 8: Deploy Kong API Gateway</a></li>
                <li><a href="#section9">Section 9: Configure Kong Routes</a></li>
                <li><a href="#section10">Section 10: Accessing Your Services</a></li>
                <li><a href="#troubleshooting">Troubleshooting Guide</a></li>
                <li><a href="#appendix">Appendix: Configuration Files</a></li>
            </ol>
        </div>

        <section id="overview">
            <h2>Overview</h2>
            <p>This guide provides step-by-step instructions to set up a complete CI/CD pipeline for deploying an ASP.NET Core Web API (.NET 8) with SQL Server using Jenkins, Docker, Kubernetes, and Kong API Gateway on your local Windows development machine.</p>
            
            <h3>What You'll Build</h3>
            <ul>
                <li><strong>Source Control:</strong> GitHub repository</li>
                <li><strong>CI/CD Tool:</strong> Jenkins for automated build and deployment</li>
                <li><strong>Containerization:</strong> Docker for creating container images</li>
                <li><strong>Orchestration:</strong> Docker Desktop Kubernetes</li>
                <li><strong>API Gateway:</strong> Kong for routing and load balancing</li>
                <li><strong>Database:</strong> SQL Server in Kubernetes with sample data</li>
                <li><strong>Registry:</strong> Docker Hub for storing container images</li>
            </ul>

            <h3>Complete Workflow</h3>
            <ol>
                <li>Developer pushes code to GitHub</li>
                <li>Jenkins detects changes (SCM polling every minute)</li>
                <li>Jenkins builds the .NET 8 project</li>
                <li>Jenkins creates Docker image</li>
                <li>Docker image is pushed to Docker Hub</li>
                <li>Kubernetes deploys the updated application</li>
                <li>API connects to SQL Server in Kubernetes</li>
                <li>Kong API Gateway routes traffic to API services</li>
                <li>Application accessible at http://localhost:8000</li>
            </ol>
        </section>

        <section id="prerequisites">
            <h2>Prerequisites</h2>
            
            <h3>Software Requirements</h3>
            <ul>
                <li><strong>Windows 10/11</strong> - Operating System</li>
                <li><strong>Docker Desktop</strong> - Installed and running</li>
                <li><strong>Jenkins</strong> - Installed and running at http://localhost:8080</li>
                <li><strong>Git</strong> - Installed for version control</li>
                <li><strong>.NET 8 SDK</strong> - For building the application</li>
                <li><strong>Visual Studio</strong> or <strong>VS Code</strong> - For code editing</li>
                <li><strong>PowerShell</strong> - For running Kong configuration commands</li>
            </ul>

            <h3>Accounts Required</h3>
            <ul>
                <li><strong>GitHub Account</strong> - For source code repository</li>
                <li><strong>Docker Hub Account</strong> - For storing Docker images</li>
            </ul>

            <h3>Project Information</h3>
            <ul>
                <li><strong>Local Repository:</strong> <code>C:\Users\mail2\source\repos\IntegratedAPP\IntegratedAPI</code></li>
                <li><strong>GitHub Repository:</strong> https://github.com/karthikeyan-1234/SomeRubbishAPI</li>
                <li><strong>Jenkins URL:</strong> http://localhost:8080</li>
                <li><strong>Docker Hub Username:</strong> karthiknat</li>
                <li><strong>Kong Gateway:</strong> http://localhost:8000</li>
                <li><strong>Kong Admin API:</strong> http://kong-admin.local</li>
            </ul>
        </section>

        <section id="architecture">
            <h2>Architecture</h2>
            <div class="architecture-diagram">
                <pre style="text-align: left;">
┌─────────────┐      ┌──────────────┐      ┌─────────────┐
│   GitHub    │─────▶│   Jenkins    │─────▶│ Docker Hub  │
│ Repository  │      │   Pipeline   │      │  Registry   │
└─────────────┘      └──────────────┘      └─────────────┘
                            │                      │
                            │                      │
                            ▼                      ▼
                     ┌──────────────────────────────────┐
                     │  Docker Desktop Kubernetes       │
                     │  ┌────────────────────────────┐  │
                     │  │      Kong API Gateway      │  │
                     │  │        (Port: 8000)        │  │
                     │  └────────────────────────────┘  │
                     │              │                   │
                     │              ▼                   │
                     │  ┌────────────────────────────┐  │
                     │  │  API Pod (Port: 7080)      │  │
                     │  │  ├─ Connects to ──┐        │  │
                     │  │                   ▼        │  │
                     │  │  SQL Server Pod (1433)     │  │
                     │  │  └─ Persistent Storage     │  │
                     │  └────────────────────────────┘  │
                     └──────────────────────────────────┘
                                  │
                                  ▼
                    http://localhost:8000 (Kong Gateway)
                    ├─ /api/* → API Service
                    ├─ /swagger → API Swagger UI  
                    └─ /web/* → Angular Frontend
                </pre>
            </div>
        </section>

        <!-- Existing Sections 1-7 remain the same -->
        <section id="section1">
            <h2>Section 1: Enable Kubernetes in Docker Desktop</h2>
            <!-- Content remains the same -->
        </section>

        <section id="section2">
            <h2>Section 2: Deploy SQL Server to Kubernetes</h2>
            <!-- Content remains the same -->
        </section>

        <section id="section3">
            <h2>Section 3: Prepare Your .NET 8 Web API Project</h2>
            <!-- Content remains the same -->
        </section>

        <section id="section4">
            <h2>Section 4: Add Database Integration to API</h2>
            <!-- Content remains the same -->
        </section>

        <section id="section5">
            <h2>Section 5: Push Your Code to GitHub</h2>
            <!-- Content remains the same -->
        </section>

        <section id="section6">
            <h2>Section 6: Configure Jenkins</h2>
            <!-- Content remains the same -->
        </section>

        <section id="section7">
            <h2>Section 7: Create Jenkins Pipeline Job</h2>
            <!-- Content remains the same -->
        </section>

        <!-- NEW SECTION: Kong API Gateway -->
        <section id="section8">
            <h2>Section 8: Deploy Kong API Gateway</h2>

            <h3>8.1: Deploy Kong to Kubernetes</h3>

            <div class="file-path">
                <strong>Create File:</strong> C:\Users\mail2\kong-deploy.yml
            </div>

            <pre><code>apiVersion: v1
kind: Namespace
metadata:
  name: kong
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kong
  namespace: kong
spec:
  replicas: 1
  selector:
    matchLabels:
      app: kong
  template:
    metadata:
      labels:
        app: kong
    spec:
      containers:
      - name: kong
        image: kong:3.8
        env:
        - name: KONG_DATABASE
          value: "off"
        - name: KONG_PROXY_ACCESS_LOG
          value: /dev/stdout
        - name: KONG_ADMIN_ACCESS_LOG
          value: /dev/stdout
        - name: KONG_PROXY_ERROR_LOG
          value: /dev/stderr
        - name: KONG_ADMIN_ERROR_LOG
          value: /dev/stderr
        - name: KONG_ADMIN_LISTEN
          value: 0.0.0.0:8001, 0.0.0.0:8444 ssl
        - name: KONG_DECLARATIVE_CONFIG
          value: /etc/kong/kong.yml
        ports:
        - containerPort: 8000
          name: proxy
        - containerPort: 8001
          name: admin
        - containerPort: 8443
          name: proxy-ssl
        - containerPort: 8444
          name: admin-ssl
        volumeMounts:
        - name: kong-config
          mountPath: /etc/kong
      volumes:
      - name: kong-config
        configMap:
          name: kong-config
---
apiVersion: v1
kind: Service
metadata:
  name: kong-proxy
  namespace: kong
spec:
  type: NodePort
  selector:
    app: kong
  ports:
  - name: proxy
    port: 8000
    targetPort: 8000
    nodePort: 30000
  - name: admin
    port: 8001
    targetPort: 8001
    nodePort: 30001
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: kong-config
  namespace: kong
data:
  kong.yml: |
    _format_version: "1.1"</code></pre>

            <div class="command-box">
                <strong>Deploy Kong:</strong>
                <pre><code>kubectl apply -f C:\Users\mail2\kong-deploy.yml</code></pre>
            </div>

            <h3>8.2: Verify Kong Deployment</h3>

            <div class="command-box">
                <strong>Check Kong Pods:</strong>
                <pre><code>kubectl get pods -n kong</code></pre>
            </div>

            <div class="command-box">
                <strong>Check Kong Services:</strong>
                <pre><code>kubectl get svc -n kong</code></pre>
            </div>

            <h3>8.3: Set up Kong Admin API Access</h3>

            <div class="command-box">
                <strong>Add Kong Admin to hosts file:</strong>
                <pre><code># Add this line to C:\Windows\System32\drivers\etc\hosts
127.0.0.1 kong-admin.local</code></pre>
            </div>

            <h3>8.4: Port Forward Kong Services</h3>

            <div class="command-box">
                <strong>Open a PowerShell window and run:</strong>
                <pre><code>kubectl port-forward -n kong service/kong-proxy 8000:8000</code></pre>
            </div>

            <div class="command-box">
                <strong>Open another PowerShell window for Admin API:</strong>
                <pre><code>kubectl port-forward -n kong service/kong-proxy 8001:8001</code></pre>
            </div>

            <div class="info-box">
                <strong>Kong Access Points:</strong>
                <ul>
                    <li><strong>Kong Gateway:</strong> http://localhost:8000</li>
                    <li><strong>Kong Admin API:</strong> http://kong-admin.local:8001</li>
                    <li><strong>Direct Admin Access:</strong> http://localhost:8001</li>
                </ul>
            </div>

            <h3>8.5: Test Kong Installation</h3>

            <div class="command-box">
                <strong>Test Kong Admin API:</strong>
                <pre><code>Invoke-RestMethod -Uri "http://kong-admin.local:8001/services" -Method GET</code></pre>
            </div>

            <div class="success-box">
                <strong>Expected Output:</strong> Should return an empty services list <code>{"data":[],"next":null}</code>
            </div>
        </section>

        <section id="section9">
            <h2>Section 9: Configure Kong Routes</h2>

            <h3>9.1: Configure Kong Using PowerShell</h3>

            <p>Run these commands in PowerShell to set up Kong routing:</p>

            <h4>Create API Service in Kong</h4>
            <div class="command-box">
                <pre><code>Invoke-RestMethod -Uri "http://kong-admin.local:8001/services" `
    -Method POST `
    -ContentType 'application/json' `
    -Body (@{
        name = "integratedapi-service"
        url = "http://integratedapi-service.default.svc.cluster.local:7080"
    } | ConvertTo-Json)</code></pre>
            </div>

            <h4>Create Routes for Different API Paths</h4>
            <div class="command-box">
                <strong>Route for endpoints WITH /api prefix:</strong>
                <pre><code>Invoke-RestMethod -Uri "http://kong-admin.local:8001/services/integratedapi-service/routes" `
    -Method POST `
    -ContentType 'application/json' `
    -Body (@{
        name = "integratedapi-with-prefix-route"
        paths = @("/api")
        strip_path = $false  # Keep /api prefix for these endpoints
        preserve_host = $true
        path_handling = "v1"
    } | ConvertTo-Json -Depth 4)</code></pre>
            </div>

            <div class="command-box">
                <strong>Route for endpoints WITHOUT /api prefix:</strong>
                <pre><code>Invoke-RestMethod -Uri "http://kong-admin.local:8001/services/integratedapi-service/routes" `
    -Method POST `
    -ContentType 'application/json' `
    -Body (@{
        name = "integratedapi-no-prefix-route"
        paths = @("/health", "/WeatherForecast")
        strip_path = $false  # Don't strip anything for these
        preserve_host = $true
        path_handling = "v1"
    } | ConvertTo-Json -Depth 4)</code></pre>
            </div>

            <div class="command-box">
                <strong>Route for Swagger UI:</strong>
                <pre><code>Invoke-RestMethod -Uri "http://kong-admin.local:8001/services/integratedapi-service/routes" `
    -Method POST `
    -ContentType 'application/json' `
    -Body (@{
        name = "integratedapi-swagger-route"
        paths = @("/swagger")
        strip_path = $false
        preserve_host = $true
        path_handling = "v1"
    } | ConvertTo-Json -Depth 4)</code></pre>
            </div>

            <h3>9.2: Verify Kong Configuration</h3>

            <div class="command-box">
                <strong>Check Services:</strong>
                <pre><code>Invoke-RestMethod -Uri "http://kong-admin.local:8001/services" -Method GET</code></pre>
            </div>

            <div class="command-box">
                <strong>Check Routes:</strong>
                <pre><code>Invoke-RestMethod -Uri "http://kong-admin.local:8001/services/integratedapi-service/routes" -Method GET</code></pre>
            </div>

            <h3>9.3: Test Kong Routing</h3>

            <div class="command-box">
                <strong>Test API endpoints through Kong:</strong>
                <pre><code># Test Employee endpoint (with /api prefix)
Invoke-RestMethod -Uri "http://localhost:8000/api/Employee/GetEmployees" -Method GET

# Test Health endpoint (without prefix)
Invoke-RestMethod -Uri "http://localhost:8000/health" -Method GET

# Test WeatherForecast endpoint (without prefix)
Invoke-RestMethod -Uri "http://localhost:8000/WeatherForecast" -Method GET

# Test Swagger UI
Invoke-RestMethod -Uri "http://localhost:8000/swagger" -Method GET</code></pre>
            </div>

            <div class="info-box">
                <strong>Kong Routing Strategy:</strong>
                <ul>
                    <li><strong>/api/*</strong> → Routes keep /api prefix (strip_path = false)</li>
                    <li><strong>/health, /WeatherForecast</strong> → Routes without prefix (strip_path = false)</li>
                    <li><strong>/swagger/*</strong> → Routes to Swagger UI documentation</li>
                </ul>
            </div>

            <h3>9.4: Optional - Add CORS Plugin</h3>

            <div class="command-box">
                <strong>Enable CORS for API:</strong>
                <pre><code>Invoke-RestMethod -Uri "http://kong-admin.local:8001/services/integratedapi-service/plugins" `
    -Method POST `
    -ContentType 'application/json' `
    -Body (@{
        name = "cors"
        config = @{
            origins = "*"
            methods = "GET,POST,PUT,DELETE,OPTIONS"
            headers = "Accept,Accept-Encoding,Authorization,Content-Type"
            exposed_headers = "*"
            credentials = "true"
        }
    } | ConvertTo-Json)</code></pre>
            </div>
        </section>

        <section id="section10">
            <h2>Section 10: Accessing Your Services</h2>

            <h3>10.1: API Endpoints Through Kong Gateway</h3>

            <table>
                <thead>
                    <tr>
                        <th>Endpoint</th>
                        <th>URL</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Swagger UI</td>
                        <td>http://localhost:8000/swagger/index.html</td>
                        <td>API documentation and testing</td>
                    </tr>
                    <tr>
                        <td>Weather Forecast</td>
                        <td>http://localhost:8000/WeatherForecast</td>
                        <td>Sample endpoint</td>
                    </tr>
                    <tr>
                        <td>Products (All)</td>
                        <td>http://localhost:8000/api/Employee/GetEmployees</td>
                        <td>Get all products from database</td>
                    </tr>
                    <tr>
                        <td>Health Check</td>
                        <td>http://localhost:8000/health</td>
                        <td>API health status</td>
                    </tr>
                </tbody>
            </table>

            <h3>10.2: Kong Admin Endpoints</h3>

            <table>
                <thead>
                    <tr>
                        <th>Service</th>
                        <th>URL</th>
                        <th>Purpose</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Kong Gateway</td>
                        <td>http://localhost:8000</td>
                        <td>Main API gateway</td>
                    </tr>
                    <tr>
                        <td>Kong Admin API</td>
                        <td>http://kong-admin.local:8001</td>
                        <td>Configuration and management</td>
                    </tr>
                    <tr>
                        <td>Kong Status</td>
                        <td>http://kong-admin.local:8001/status</td>
                        <td>Kong health and metrics</td>
                    </tr>
                </tbody>
            </table>

            <h3>10.3: Other URLs</h3>

            <table>
                <thead>
                    <tr>
                        <th>Service</th>
                        <th>URL</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Jenkins Dashboard</td>
                        <td>http://localhost:8080</td>
                    </tr>
                    <tr>
                        <td>GitHub Repository</td>
                        <td>https://github.com/karthikeyan-1234/SomeRubbishAPI</td>
                    </tr>
                    <tr>
                        <td>Docker Hub Images</td>
                        <td>https://hub.docker.com/r/karthiknat/somerubbishapi</td>
                    </tr>
                    <tr>
                        <td>Direct API Access</td>
                        <td>http://localhost:7080</td>
                    </tr>
                </tbody>
            </table>

            <h3>10.4: Complete Architecture Flow</h3>

            <div class="info-box">
                <strong>Request Flow:</strong>
                <ol>
                    <li>Client request → http://localhost:8000/api/Employee/GetEmployees</li>
                    <li>Kong Gateway receives request</li>
                    <li>Kong routes to integratedapi-service based on path</li>
                    <li>Request forwarded to http://integratedapi-service:7080/api/Employee/GetEmployees</li>
                    <li>.NET API processes request</li>
                    <li>API connects to SQL Server at sqlserver-service:1433</li>
                    <li>Response flows back through Kong to client</li>
                </ol>
            </div>

            <h3>10.5: Making Code Changes</h3>

            <p>The CI/CD pipeline automatically deploys changes through Kong:</p>
            <ol>
                <li>Edit code in Visual Studio</li>
                <li>Commit changes: <code>git add . && git commit -m "description"</code></li>
                <li>Push to GitHub: <code>git push origin main</code></li>
                <li>Jenkins detects change within 1 minute</li>
                <li>Automatic build and deployment occurs</li>
                <li>Kong automatically routes to new API version</li>
                <li>Refresh API endpoints to see changes</li>
            </ol>
        </section>

        <section id="troubleshooting">
            <h2>Troubleshooting Guide</h2>

            <h3>Kong-Specific Issues</h3>

            <h4>Issue 1: Kong Routes Returning 404</h4>
            <div class="command-box">
                <strong>Check Kong Routes:</strong>
                <pre><code>Invoke-RestMethod -Uri "http://kong-admin.local:8001/routes" -Method GET</code></pre>
            </div>
            <p><strong>Solution:</strong> Verify strip_path setting matches your API's expected paths</p>

            <h4>Issue 2: Kong Cannot Resolve Service Names</h4>
            <div class="command-box">
                <strong>Test DNS Resolution:</strong>
                <pre><code>kubectl run -n kong dns-test --image=curlimages/curl --rm -it --restart=Never -- nslookup integratedapi-service.default.svc.cluster.local</code></pre>
            </div>
            <p><strong>Solution:</strong> Use full DNS names in Kong service configuration</p>

            <h4>Issue 3: Kong Admin API Not Accessible</h4>
            <div class="command-box">
                <strong>Check Kong Pods:</strong>
                <pre><code>kubectl get pods -n kong
kubectl logs -n kong deployment/kong</code></pre>
            </div>
            <p><strong>Solution:</strong> Ensure both port-forward commands are running</p>

            <!-- Existing troubleshooting content remains -->
            <h3>General Debugging Commands</h3>
            <table>
                <thead>
                    <tr>
                        <th>Purpose</th>
                        <th>Command</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>View all pods</td>
                        <td><code>kubectl get pods --all-namespaces</code></td>
                    </tr>
                    <tr>
                        <td>View Kong services</td>
                        <td><code>kubectl get svc -n kong</code></td>
                    </tr>
                    <tr>
                        <td>Check Kong routes</td>
                        <td><code>Invoke-RestMethod -Uri "http://kong-admin.local:8001/routes" -Method GET</code></td>
                    </tr>
                    <tr>
                        <td>Test API through Kong</td>
                        <td><code>Invoke-RestMethod -Uri "http://localhost:8000/health" -Method GET</code></td>
                    </tr>
                    <tr>
                        <td>View Kong logs</td>
                        <td><code>kubectl logs -n kong deployment/kong</code></td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="appendix">
            <h2>Appendix: Kong Configuration Reference</h2>

            <h3>Kong Service Configuration</h3>
            <pre><code># Service Definition
{
    "name": "integratedapi-service",
    "url": "http://integratedapi-service.default.svc.cluster.local:7080"
}

# Route Configuration for API endpoints
{
    "name": "integratedapi-with-prefix-route",
    "paths": ["/api"],
    "strip_path": false,
    "preserve_host": true,
    "path_handling": "v1"
}

# Route Configuration for root endpoints  
{
    "name": "integratedapi-no-prefix-route",
    "paths": ["/health", "/WeatherForecast"],
    "strip_path": false,
    "preserve_host": true,
    "path_handling": "v1"
}</code></pre>

            <h3>PowerShell Kong Management Commands</h3>
            <pre><code># Create service
Invoke-RestMethod -Uri "http://kong-admin.local:8001/services" -Method POST -Body $body

# List all services
Invoke-RestMethod -Uri "http://kong-admin.local:8001/services" -Method GET

# Delete service (cleanup)
Invoke-RestMethod -Uri "http://kong-admin.local:8001/services/integratedapi-service" -Method DELETE

# Add CORS plugin
Invoke-RestMethod -Uri "http://kong-admin.local:8001/services/integratedapi-service/plugins" -Method POST -Body $corsBody</code></pre>

            <h3>Kong Deployment Files</h3>
            <table>
                <thead>
                    <tr>
                        <th>File</th>
                        <th>Location</th>
                        <th>Purpose</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>kong-deploy.yml</td>
                        <td>C:\Users\mail2\kong-deploy.yml</td>
                        <td>Kong deployment to Kubernetes</td>
                    </tr>
                    <tr>
                        <td>Kong Config</td>
                        <td>PowerShell commands</td>
                        <td>Dynamic route configuration</td>
                    </tr>
                </tbody>
            </table>

            <!-- Existing appendix content remains -->
        </section>

        <footer style="margin-top: 50px; padding-top: 20px; border-top: 2px solid #e0e0e0; text-align: center; color: #666;">
            <p><strong>CI/CD Setup Guide - Version 3.0</strong></p>
            <p>Complete deployment with Jenkins, Kubernetes, Kong API Gateway, and SQL Server</p>
            <p>Generated on October 12, 2025</p>
        </footer>
    </div>
</body>
</html>